{
  "template_registry": {
    "registry_version": "1.1.0",
    "scope": "math_1_4",
    "source": {
      "generated_by": "chatgpt",
      "generated_at": "2026-02-09",
      "notes": "New missing templates batch 2 (T16,T19,T20,T21,T23) built to match existing TemplateRegistry format; tasks are synthetic examples."
    },
    "enums": {
      "task_type_enum": [
        "number_sense",
        "numeral_systems",
        "arithmetic_fluency",
        "fractions_percent",
        "word_problems",
        "measurement_units",
        "geometry",
        "data_representation",
        "patterns_logic"
      ],
      "format_enum": [
        "plain_text",
        "inline_examples",
        "column",
        "fill_gaps",
        "table",
        "diagram",
        "number_line",
        "grid",
        "drawing",
        "mixed"
      ],
      "constraints_enum": [
        "needs_visual",
        "has_table",
        "has_diagram",
        "has_number_line",
        "has_grid",
        "has_drawing",
        "multi_step",
        "unit_conversion",
        "roman_numerals",
        "fraction_notation",
        "percent",
        "trick_question"
      ],
      "template_params_keys": [
        "ops",
        "range_max",
        "written_algorithm",
        "unknown_component",
        "compare_mode",
        "change_mode",
        "word_model",
        "unit_kind",
        "data_task_mode",
        "geometry_mode",
        "logic_mode"
      ]
    },
    "templates": [
      {
        "template_code": "T19",
        "template_id": "T19_pedagogical_template",
        "title": "Текстовые задачи на величины (длина/масса/время/деньги)",
        "grade_min": 1,
        "grade_max": 4,
        "formats_allowed": [
          "plain_text",
          "mixed"
        ],
        "ped_keys_defaults": {
          "task_type": "word_problems",
          "format": "plain_text",
          "topic": "measurement_story_problems",
          "constraints": [
            "uses_units"
          ],
          "template_params_defaults": {
            "units": [
              "length",
              "mass",
              "time",
              "money",
              "volume"
            ],
            "may_need_conversion": true
          }
        },
        "routing": {
          "match_keys": {
            "task_type": "word_problems",
            "topic": "measurement_story_problems",
            "formats_allowed": [
              "plain_text",
              "mixed"
            ]
          },
          "routing_rules": [
            {
              "rule_id": "T19_STORY_WITH_UNITS",
              "routing_priority": 92,
              "must_have": {
                "text_patterns_any": [
                  "(см|мм|м\\b|км|г\\b|кг|л\\b|мл|мин|ч\\b|час|руб|коп)",
                  "(сколько\\s+(всего|осталось|будет)|на\\s+сколько\\s+(больше|меньше))",
                  "(прош(ёл|ла)|ехал|шёл|весит|стоит|купил|продал)"
                ],
                "text_patterns_all": [],
                "visual_kinds_any": []
              },
              "must_not": {
                "text_patterns_any": [
                  "перевед(и|ите)|вырази(те)?|в\\s+каких\\s+единицах",
                  "таблица|диаграмм|термометр|°",
                  "за\\s+1\\s*(кг|л|м|час)|за\\s+один",
                  "скорост|км/ч|м/с",
                  "площадь|периметр",
                  "процент|%|дроб|доля"
                ],
                "visual_kinds_any": [
                  "table",
                  "diagram",
                  "number_line"
                ]
              }
            }
          ],
          "confusables": [
            "T18_pedagogical_template",
            "T21_pedagogical_template",
            "T20_pedagogical_template",
            "T22_pedagogical_template"
          ]
        },
        "hint_policy_defaults": {
          "default_visible": 1,
          "max_hints": 2
        },
        "notes_for_backend": []
      }
    ],
    "routing_tests": [
      {
        "id": "RT_T19_A",
        "kind": "positive",
        "description": "У Пети было 50 руб. Он купил тетрадь за 18 руб. Сколько рублей осталось?",
        "expected": {
          "template_id": "T19_pedagogical_template",
          "task_type": "word_problems",
          "format": "plain_text",
          "topic": "measurement_story_problems"
        },
        "why": "Деньги, один шаг, выбор действия."
      },
      {
        "id": "RT_T19_B",
        "kind": "positive",
        "description": "Шнур длиной 2 м разрезали и отрезали 35 см. Сколько сантиметров осталось?",
        "expected": {
          "template_id": "T19_pedagogical_template",
          "task_type": "word_problems",
          "format": "plain_text",
          "topic": "measurement_story_problems"
        },
        "why": "Длина + единицы + нужна конверсия."
      },
      {
        "id": "RT_T19_C",
        "kind": "negative",
        "description": "Переведи 3 м 25 см в сантиметры.",
        "expected": {
          "not_template_id": "T19_pedagogical_template"
        },
        "why": "Чистый перевод единиц — T21."
      }
    ]
  },
  "template_profiles": {
    "T19_pedagogical_template": {
      "hint_style_profile": {
        "tone": "friendly_teacher",
        "do_not_repeat_task_text": true,
        "line_break_each_step": true
      },
      "max_hints_default": 2,
      "age_language": {
        "grade_min": 1,
        "grade_max": 4,
        "register": "kid_friendly_ru"
      },
      "teaching_pattern": {
        "goal": "Решать текстовые задачи с величинами (длина, масса, время, деньги), правильно выбирать действие и следить за единицами измерения.",
        "l1": {
          "format": "Дано/Найти + единицы",
          "rules": [
            "Найди величины и единицы (см, м, кг, мин, руб). Запиши кратко: что дано и что нужно.",
            "Проверь: одинаковые ли единицы? Если разные — сначала приведи к одним."
          ],
          "forbidden": [
            "переписывать условие задачи целиком",
            "давать конечный ответ сразу"
          ]
        },
        "l2": {
          "format": "Действие и перевод единиц",
          "rules": [
            "Выбери действие по смыслу: «всего/стало» → сложение; «осталось/на сколько» → вычитание.",
            "Если нужно привести единицы: 1 м = 100 см; 1 кг = 1000 г; 1 ч = 60 мин; 1 руб = 100 коп."
          ],
          "forbidden": [
            "давать полный ответ без шагов"
          ]
        },
        "l3": {
          "format": "Проверка",
          "rules": [
            "Проверь ответ: с единицами (см/кг/руб) и по смыслу больше/меньше.",
            "Сделай прикидку: порядок величины должен быть разумным."
          ],
          "forbidden": [
            "решить за ребёнка полностью",
            "раскрывать все вычисления до конца без запроса"
          ]
        }
      },
      "common_mistakes": [
        "Складывают величины в разных единицах без перевода (2 м + 50 см = 52 — неверно!).",
        "Путают единицы измерения: км и м, кг и г, ч и мин.",
        "Забывают перевести ответ в нужные единицы, указанные в вопросе.",
        "Неправильно переводят: 1 кг = 100 г (правильно: 1000 г).",
        "При работе со временем забывают, что в часе 60 минут, а не 100."
      ],
      "terminology_rules": {
        "use_terms": [],
        "avoid_terms": [
          "очевидно",
          "элементарно"
        ]
      },
      "disclosure_defaults": {
        "show_checks": false
      }
    }
  }
}